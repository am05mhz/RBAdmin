!function(e,t){"use strict"
var s=function(){function e(){if(!r){r=!0
for(var e=0;e<s.length;e++)s[e].fn.call(window,s[e].args)
s=[]}}function t(){"complete"===document.readyState&&e()}var s=[],r=!1,a=!1
return{on:function(n,i,o,h){if(this.isVarTypeOf(n,String)&&(n=document.querySelector(n)),n){if(!this.isVarTypeOf(o,Function))throw new TypeError("callback for x_x.onEvent() must be a function")
if(n==window&&"ready"==i){if(r)return void setTimeout(function(){o(h)},1)
s.push({fn:o,args:h}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(this._ready,1):a||(document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):(document.attachEvent("onreadystatechange",t),window.attachEvent("onload",e)),a=!0)}else window.addEventListener?window.addEventListener(i,o,!1):window.attachEvent("on"+i,o)}},extends:Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},isVarTypeOf:function(e,t){try{return e.constructor===t}catch(s){return e==t}},errand:function(e){var t=function(e){if(!this.parse(e))throw new Error("Invalid arguments")
var t=this.serialize(this.data)
t.length>0&&("get"!==this.method?this.formData=t.join("&"):this.url+=this.url.indexOf("?")!=-1?"&":"?"+t.join("&")),this.setXhr()}
return t.methods=["get","post","put","delete"],t.prototype.serialize=function(e,t){var s,r=[]
for(var a in e)s=""==t||void 0==t?a:t+"["+a+"]",x_x.isVarTypeOf(e[a],Array)||x_x.isVarTypeOf(e[a],Object)?r=r.concat(this.serialize(e[a],s)):r.push(s+"="+e[a])
return r},t.prototype.parse=function(e){if(x_x.isVarTypeOf(e,String)&&(e={url:e}),x_x.isVarTypeOf(e,Object)&&x_x.isVarTypeOf(e.url,String))return this.url=e.url,this.method="get",this.json=!1,this.data={},this.formData=null,x_x.isVarTypeOf(e.method,String)&&(e.method=e.method.toLowerCase(),t.methods.indexOf(e.method)!=-1&&(this.method=e.method)),e.json&&(this.json=!0),x_x.isVarTypeOf(e.data,Object)&&(this.data=e.data),x_x.isVarTypeOf(e.headers,Object)?this.headers=e.headers:this.headers={},!0},t.prototype.setXhr=function(){this.xhr=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.xhr.json=this.json,this.cancel=function(e){return this.xhr.abort(),this},this.xhr.callbacks={success:[],error:[]}
for(var e in this.xhr.callbacks)this[e]=function(e){return function(t){return this.xhr.callbacks[e].push(t),this}}(e)
if(this.xhr.call=function(e,t){for(var s=0;s<this.callbacks[e].length;s++)x_x.isVarTypeOf(this.callbacks[e][s],Function)&&this.callbacks[e][s](t)},this.xhr.onreadystatechange=function(){if(4==this.readyState){var e="error",t={status:this.status,message:"unknown",response:this.responseText}
switch(this.status){case 200:var s=this.responseText
if(this.json)try{s=JSON.parse(s)}catch(s){return t.message="invalid json",this.call(e,t),!1}e="success",t=s
break
case 400:t.message="bad request"
break
case 401:t.message="unauthorized"
break
case 403:t.message="forbidden"
break
case 404:t.message="not found"
break
case 500:t.message="internal server error"
break
case 502:t.message="bad gateway"
break
case 504:t.message="gateway timeout"}this.call(e,t)}},this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.headers)for(header in this.headers)this.xhr.setRequestHeader(header,this.headers[header])
this.xhr.send(this.formData)},new t(e)}}}
t.x_x=new s}(0,window)
