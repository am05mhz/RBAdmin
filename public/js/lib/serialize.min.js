function serialize(e,s){"object"!=typeof s?s={hash:!!s}:void 0===s.hash&&(s.hash=!0)
for(var a=s.hash?{}:"",r=s.serializer||(s.hash?hash_serializer:str_serialize),t=e&&e.elements?e.elements:[],i=Object.create(null),n=0;n<t.length;++n){var l=t[n]
if((s.disabled||!l.disabled)&&l.name&&k_r_success_contrls.test(l.nodeName)&&!k_r_submitter.test(l.type)){var h=l.name,c=l.value
if("checkbox"!==l.type&&"radio"!==l.type||l.checked||(c=void 0),s.empty){if("checkbox"!==l.type||l.checked||(c=""),"radio"===l.type&&(i[l.name]||l.checked?l.checked&&(i[l.name]=!0):i[l.name]=!1),void 0==c&&"radio"==l.type)continue}else if(!c)continue
if("select-multiple"!==l.type)a=r(a,h,c)
else{c=[]
for(var u=l.options,o=!1,p=0;p<u.length;++p){var _=u[p],m=s.empty&&!_.value,d=_.value||m
_.selected&&d&&(o=!0,a=s.hash&&"[]"!==h.slice(h.length-2)?r(a,h+"[]",_.value):r(a,h,_.value))}!o&&s.empty&&(a=r(a,h,""))}}}if(s.empty)for(var h in i)i[h]||(a=r(a,h,""))
return a}function parse_keys(e){var s=[],a=/^([^\[\]]*)/,r=new RegExp(brackets),t=a.exec(e)
for(t[1]&&s.push(t[1]);null!==(t=r.exec(e));)s.push(t[1])
return s}function hash_assign(e,s,a){if(0===s.length)return e=a
var r=s.shift(),t=r.match(/^\[(.+?)\]$/)
if("[]"===r)return e=e||[],Array.isArray(e)?e.push(hash_assign(null,s,a)):(e._values=e._values||[],e._values.push(hash_assign(null,s,a))),e
if(t){var i=t[1],n=+i
isNaN(n)?(e=e||{},e[i]=hash_assign(e[i],s,a)):(e=e||[],e[n]=hash_assign(e[n],s,a))}else e[r]=hash_assign(e[r],s,a)
return e}function hash_serializer(e,s,a){if(s.match(brackets))hash_assign(e,parse_keys(s),a)
else{var r=e[s]
r?(Array.isArray(r)||(e[s]=[r]),e[s].push(a)):e[s]=a}return e}function str_serialize(e,s,a){return a=a.replace(/(\r)?\n/g,"\r\n"),a=encodeURIComponent(a),a=a.replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(s)+"="+a}var k_r_submitter=/^(?:submit|button|image|reset|file)$/i,k_r_success_contrls=/^(?:input|select|textarea|keygen)/i,brackets=/(\[[^\[\]]*\])/g
void 0!==window.module&&module.exports&&(module.exports=serialize)
